---
title: "Health Analytics Collaboratory (HAC) - University of Michigan"
subtitle: "<h2><u>HAC Alzheimer's Disease Digital Health Analytics Project: Loading and Converting Data Files </u></h2>"
author: "<h3>Ivo Dinov, Cooper Stansbury, Haiyin Liu, Bingxin Chen</h3>"
date: "`r format(Sys.time(), '%B %Y')`"
tags: [HAC, DSPA, SOCR, MIDAS, Big Data, Predictive Analytics, Computable Phenotypes] 
output:
  html_document:
    theme: spacelab
    highlight: tango
    includes:
      before_body: SOCR_header.html
    toc: true
    number_sections: true
    toc_depth: 2
    toc_float:
      collapsed: false
      smooth_scroll: true
---

This HAC Project is focused on Alzheimer's Disease & Computable Dementia Phenotypes 

 - [MBOX](https://umich.app.box.com/folder/74508633481)
 - [Canvas](https://umich.instructure.com/courses/137434)
 
Driving Dementia Health Challenges
 - Big Data management, aggregation and harmonization (neuroimaging, clinical genetics data)
 - Early identification, diagnosis and prognosis of dementia
 - Clinically relevant representations and computable phenotypes to better understand disease 
pathogenesis.

# Session Information and Configuration
This section outputs information regarding loaded dependencies and OS configuration that may help in trouble-shooting. 

```{r}
sessionInfo()
```

```{r}
sapply(c('repr', 'IRdisplay', 'IRkernel'), function(p) paste(packageVersion(p)))
```

# Convert Data to Different File Formats
This section contains code "blocks"" for saving data in different file formats for ingestion into different downstream programs. We have included the code needed to re-open these objects in the R environment as well.

### Load Data
Load the data into R environment. We assume that the data is in a `.csv` file format. Other load options are shown below, but are commented out. You will need to rename all file_path variables to suite your local environment. For example. `c:/my_data_file.csv` will likely not work for an OSX machine.

```{r}
csv_data_file_path = 'c:/my_data_file.csv'
data = read.csv(csv_data_file_path, header=TRUE)


# # in case the 'raw' data file is in .xlsx format, this method may be needed. 
# library(readxl)
# xlsx_data_file_path = 'c:/my_data_file.xlsx'
# data <- read_excel(xlsx_data_file_path)
```

## R Objects
Note, R changes rapidly. Filetypes specific to R may not be robust to future changes in technology.
### RData
`.Rdata` (sometimes `.Rda`) files are specific to the R environment. They can store arbitrary numbers of objects in a single file. For more documentation I suggest: 
[https://bookdown.org/ndphillips/YaRrr/rdata-files.html](https://bookdown.org/ndphillips/YaRrr/rdata-files.html).
```{r}
# saves data object to .RData file 
rdata_save_path = "c:/mydata.RData"
save(data, file = rdata_save_path)

# # loads data object from .RData file 
# data <- load("c:/mydata.RData")
```

### RDS
`.rds` files are specific to the R environment. They are similar to `.RData` files, except they store a single object only.
```{r}
# saves data object as .rds file
rds_save_path = "c:/mydata.rds"
saveRDS(data, file = rds_save_path)

# # loads data object from .rds file
# data <- readRDS( "c:/mydata.rds")
```

### Workspace Images
In case you are worried about loosing information about the peroject contained in the workspace, you can save the entire workspace. 
```{r}
# # saves a worskpace image ot .RData file
# save.image(file = "c:/work_space.RData")

# # loads workspace image from .RData file
# work_space <- load("c:/work_space.RData")
```

## Non-R Filetypes
The file types below are for programs other than R. Many of these packages require the library `foreign` to be installed. This package can be installed via the code block below. It is suggested that one read the library documentation when working with file formats for other statistical software: [https://www.rdocumentation.org/packages/foreign/versions/0.8-71](https://www.rdocumentation.org/packages/foreign/versions/0.8-71).

```{r}
# # installs required package on local machine.
# install.packages('foreign')
```

### CSV
This is the most robust long-term file storage format. Not that there are several possible arguments for `write.csv()` that may be necessary to specify depending on downstream requirements.
```{r}
# saves data object as .csv file
csv_save_path = "c:/mydata.csv"
write.csv(data, file = csv_save_path, row.name=FALSE)

# can be loaded via `read.csv(path)`
```

### STATA
Create a version of the file for STATA. Note that the library `foreign` has a built-in method for writing `.dta` files.
```{r}
library(foreign)
stata_save_path = "c:/mydata.dta"
write.dta(data, stata_save_path)
```

### SAS
Create a version of the file for SAS. SAS files require the `write.foreign()` method, and require specification for both the data object and SAS code to ingest that data object.
```{r}
library(foreign)
sas_data_save_path = "c:/mydata.txt"
sas_code_path = "c:/mydata.sas"

write.foreign(data, sas_data_save_path, sas_code_path,   package="SAS")
```

### SPSS
Create a version of the file for SPSS SPSS files require the `write.foreign()` method, and require specification for both the data object and SPSS code to ingest that data object.
```{r}
library(foreign)
spss_data_save_path = "c:/mydata.txt"
spss_code_path = "c:/mydata.sps"

write.foreign(data, spss_data_save_path, spss_code_path,   package="SAS")
```


<!--html_preserve DO NOT CHANGE THIS FOOTER -->
<div>
    	<footer><center>
			<a href="http://www.socr.umich.edu/">SOCR Resource</a>
				Visitor number <img src="http://counter.digits.net/?counter=SOCR"
	 			align="middle" border="0" height="20" hspace="4" vspace="2" width="60">
				<script type="text/javascript">
					var d = new Date();
					document.write(" | " + d.getFullYear() + " | ");
				</script> 
				<a href="http://socr.umich.edu/img/SOCR_Email.png"><img alt="SOCR Email"
	 			title="SOCR Email" src="http://socr.umich.edu/img/SOCR_Email.png"
	 			style="border: 0px solid ;"></a>
	 		 </center>
	 	</footer>

	<!-- Start of StatCounter Code -->
		<script type="text/javascript">
			var sc_project=5714596; 
			var sc_invisible=1; 
			var sc_partition=71; 
			var sc_click_stat=1; 
			var sc_security="038e9ac4"; 
		</script>
		
		<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js"></script>
	<!-- End of StatCounter Code -->
	
	<!-- GoogleAnalytics -->
		<script src="https://www.google-analytics.com/urchin.js" type="text/javascript"> </script>
		<script type="text/javascript"> _uacct = "UA-676559-1"; urchinTracker(); </script>
	<!-- End of GoogleAnalytics Code -->
</div>
<!--/html_preserve-->


